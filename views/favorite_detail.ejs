<%- include('partials/header_fortnite') %>

<main>
    <section class="character-container-detail">
        <figure class="character-image">
            <img src="<%= character.images.icon %>" alt="<%= character.name %>">
            <figcaption><p>&copy;Epic Games</p></figcaption>
        </figure>
        <article class="character-info">
            <article class="product-title"><%= character.name %></article>
            <article class="product-description">
                <p><%= character.description %></p>
            </article>
        </article>
        <article class="action-buttons">
            <button class="wins-button"><i class="fas fa-trophy"></i> Wins: <%= character.wins %></button>
            <button class="losses-button"><i class="fas fa-thumbs-down"></i> Losses: <%= character.losses %></over>
        </article>
    </section>
</main>

<script>
document.querySelector('.favorite-button').addEventListener('click', async (e) => {
        e.preventDefault();
        const characterId = '<%= character.id %>';
        const response = await fetch(`/character/favorite`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ id: characterId }),
        });
        const result = await response.json();
        if (result.success) {
            location.reload();
        } else {
            alert('Something went wrong!');
        }
    });

    document.querySelector('.blacklist-button').addEventListener('click', async (e) => {
        e.preventDefault();
        const characterId = '<%= character.id %>';
        const response = await fetch(`/character/blacklist`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ id: characterQuId }),
        });
        const result = await response.json();
        if (result.success) {
            location.reload();
        } else {
            alert('Something went wrong!');
        }
    });

    document.querySelector('.wins-button').addEventListener('click', async (e) => {
        e.preventDefault();
        const characterId = '<%= character.id %>';
        const response = await fetch(`/character/win`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ id: characterId }),
        });
        const result = await response.json();
        if (result.success) {
            location.reload();  
        } else {
            alert('Something went wrong!');
        }
    });

    document.querySelector('.losses-button').addEventListener('click', async (e) => {
        e.preventDefault();
        const characterId = '<%= character.id %>';
        const response = await fetch(`/character/loss`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ id: characterId }),
        });
        const result = await response.json();
        if (result.success) {
            location.reload();  
        } else {
            alert('Something went wrong!');
        }
    });
</script>


<%- include('partials/footer') %>
