<main>
    <section class="character-container-detail">
        <figure class="character-image">
            <img src="<%= character.images.icon %>" alt="<%= character.name %>">
            <figcaption><p>&copy;Epic Games</p></figcaption>
        </figure>
        <article class="character-info">
            <article class="product-title"><%= character.name %></article>
            <article class="product-description">
                <p><%= character.description %></p>
            </article>
        </article>
        <article class="action-buttons">
            <button class="remove-blacklist-button" onclick="removeFromBlacklist('<%= character.id %>')"><i class="fas fa-ban"></i> Verwijder van Blacklist</button>
        </article>
    </section>
</main>

<script>
function removeFromBlacklist(characterId) {
    if (confirm('Weet je zeker dat je dit personage wilt verwijderen van de blacklist?')) {
        fetch(`/character/removeFromBlacklist`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ id: characterId }),
        })
        .then(response => response.json())
        .then(result => {
            if (result.success) {
                alert('Personage verwijderd van blacklist!');
                window.location.href = '/blacklisted_characters';  // Pas dit aan naar de juiste route waar de gebruiker naartoe moet gaan
            } else {
                alert('Er ging iets mis bij het verwijderen!');
            }
        })
        .catch(error => {
            console.error('Fout bij het verwijderen van het karakter van de blacklist:', error);
            alert('Er ging iets mis bij het verwijderen!');
        });
    }
}
</script>
